<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS基础 | Pioneer</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/jquery.js"></script>
    <meta name="description" content="Nothing is impossible for a willing heart!">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.203198fa.css" as="style"><link rel="preload" href="/assets/js/app.0a4da864.js" as="script"><link rel="preload" href="/assets/js/4.6a199617.js" as="script"><link rel="preload" href="/assets/js/1.65eefa6a.js" as="script"><link rel="preload" href="/assets/js/24.c872c11f.js" as="script"><link rel="prefetch" href="/assets/js/10.a6e4610a.js"><link rel="prefetch" href="/assets/js/11.a29eb828.js"><link rel="prefetch" href="/assets/js/12.5fcdc7d6.js"><link rel="prefetch" href="/assets/js/13.d45c3642.js"><link rel="prefetch" href="/assets/js/14.d2b0b7f6.js"><link rel="prefetch" href="/assets/js/15.5c7f9ce8.js"><link rel="prefetch" href="/assets/js/16.86e3767f.js"><link rel="prefetch" href="/assets/js/17.a6c841fa.js"><link rel="prefetch" href="/assets/js/18.cd597412.js"><link rel="prefetch" href="/assets/js/19.2b0629e9.js"><link rel="prefetch" href="/assets/js/20.744251da.js"><link rel="prefetch" href="/assets/js/21.a616703a.js"><link rel="prefetch" href="/assets/js/22.796fc1f2.js"><link rel="prefetch" href="/assets/js/23.e6879e52.js"><link rel="prefetch" href="/assets/js/25.2d4e86b2.js"><link rel="prefetch" href="/assets/js/26.946a7fac.js"><link rel="prefetch" href="/assets/js/27.c36ec733.js"><link rel="prefetch" href="/assets/js/28.1f5fccb2.js"><link rel="prefetch" href="/assets/js/29.584144c6.js"><link rel="prefetch" href="/assets/js/30.9d9624c5.js"><link rel="prefetch" href="/assets/js/31.ac17fb74.js"><link rel="prefetch" href="/assets/js/32.0b80cfd6.js"><link rel="prefetch" href="/assets/js/33.49b9a7a9.js"><link rel="prefetch" href="/assets/js/34.ade2e479.js"><link rel="prefetch" href="/assets/js/35.e2c6fdae.js"><link rel="prefetch" href="/assets/js/36.efa94925.js"><link rel="prefetch" href="/assets/js/5.af8ef62e.js"><link rel="prefetch" href="/assets/js/6.12f576bd.js"><link rel="prefetch" href="/assets/js/7.980436bf.js"><link rel="prefetch" href="/assets/js/8.2b0aec3e.js"><link rel="prefetch" href="/assets/js/9.1b1a78b0.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.2b39c60c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.203198fa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-5bb33761><div data-v-5bb33761><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-5bb33761 data-v-5bb33761><h3 class="title" data-v-59e6cb88>Pioneer</h3> <p class="description" data-v-59e6cb88>Nothing is impossible for a willing heart!</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>pioneer</span>
          
        <span data-v-59e6cb88>2022 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-5bb33761><header class="navbar" data-v-5bb33761><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/app/logo.jpg" alt="Pioneer" class="logo"> <span class="site-name">Pioneer</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/vuepress/" class="nav-link"><i class="undefined"></i>
  vuepress
</a></li><li class="dropdown-item"><!----> <a href="/categories/markdown/" class="nav-link"><i class="undefined"></i>
  markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front/css/" class="nav-link"><i class="undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/front/js/" class="nav-link router-link-active"><i class="undefined"></i>
  Js
</a></li><li class="dropdown-item"><!----> <a href="/front/node/" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/front/network/" class="nav-link"><i class="undefined"></i>
  网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-coding"></i>
      常见题
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/interview/base/" class="nav-link"><i class="undefined"></i>
  基础题
</a></li><li class="dropdown-item"><!----> <a href="/front/interview/function/" class="nav-link"><i class="undefined"></i>
  功能思路
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/pioneer22" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-5bb33761></div> <aside class="sidebar" data-v-5bb33761><div class="personal-info-wrapper" data-v-1fad0c41 data-v-5bb33761><img src="/images/app/logo.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    pioneer
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>25</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>3</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/vuepress/" class="nav-link"><i class="undefined"></i>
  vuepress
</a></li><li class="dropdown-item"><!----> <a href="/categories/markdown/" class="nav-link"><i class="undefined"></i>
  markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front/css/" class="nav-link"><i class="undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/front/js/" class="nav-link router-link-active"><i class="undefined"></i>
  Js
</a></li><li class="dropdown-item"><!----> <a href="/front/node/" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/front/network/" class="nav-link"><i class="undefined"></i>
  网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-coding"></i>
      常见题
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/interview/base/" class="nav-link"><i class="undefined"></i>
  基础题
</a></li><li class="dropdown-item"><!----> <a href="/front/interview/function/" class="nav-link"><i class="undefined"></i>
  功能思路
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/pioneer22" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/front/js/" aria-current="page" class="sidebar-link">基础题</a></li><li><a href="/front/js/mst.html" class="sidebar-link">面试题</a></li><li><a href="/front/js/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/front/js/js.html" aria-current="page" class="active sidebar-link">JS基础</a></li><li><a href="/front/js/shengtou.html" class="sidebar-link">渗透技术</a></li><li><a href="/front/js/RegExp.html" class="sidebar-link">正则表达式</a></li><li><a href="/front/js/designMode.html" class="sidebar-link">设计模式</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-5bb33761><h3 class="title" data-v-59e6cb88>JS基础</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>pioneer</span>
          
        <span data-v-59e6cb88>2022 - </span>
        2023
      </a></span></div></div> <div data-v-5bb33761><div data-v-5bb33761><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">JS基础</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>pioneer</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>8/23/2022</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><div class="custom-block warning"><p class="title"></p><p><strong>JS 基础</strong></p></div><h2 id="javascript-组成"><a href="#javascript-组成" class="header-anchor">#</a> JavaScript 组成</h2> <ul><li>ECMAScript</li> <li>DOM： 页面文档对象模型</li> <li>BOM： 浏览器对象模型</li></ul> <h3 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h3> <ol><li>文档： 一个页面就是一个文档, DOM 中用 document 表示。</li> <li>元素： 页面中的所有标签都是元素, DOM 中使用 element 表示。</li> <li>节点： 网页中的所有内容都是节点(标签, 属性, 文本, 注释等), DOM 中使用 node 表示。</li></ol> <ul><li>文档 -&gt; 元素 -&gt; 节点</li> <li><strong>DOM 把以上内容都看做是对象</strong></li></ul> <h3 id="获取特殊元素"><a href="#获取特殊元素" class="header-anchor">#</a> <strong>获取特殊元素</strong></h3> <ul><li>获取 body 元素对象, document.body</li> <li>获取 html 元素对象, document.documentElement</li></ul> <h3 id="事件"><a href="#事件" class="header-anchor">#</a> <strong>事件</strong></h3> <ul><li>事件源</li> <li>事件类型</li> <li>事件处理程序</li></ul> <p><strong>执行事件步骤</strong></p> <ol><li>获取事件源</li> <li>绑定事件</li> <li>添加事件处理程序（采取函数赋值形式）</li></ol> <table><thead><tr><th>鼠标事件</th> <th style="text-align:center;">触发条件</th></tr></thead> <tbody><tr><td>onclick</td> <td style="text-align:center;">鼠标点击左键</td></tr> <tr><td>onmouseover</td> <td style="text-align:center;">鼠标经过</td></tr> <tr><td>onmouseout</td> <td style="text-align:center;">鼠标离开</td></tr> <tr><td>onfocus</td> <td style="text-align:center;">获得鼠标焦点</td></tr> <tr><td>onblur</td> <td style="text-align:center;">失去鼠标焦点</td></tr> <tr><td>onmousemove</td> <td style="text-align:center;">鼠标移动</td></tr> <tr><td>onmouseup</td> <td style="text-align:center;">鼠标弹起</td></tr> <tr><td>onmousedown</td> <td style="text-align:center;">鼠标按下</td></tr></tbody></table> <h3 id="操作元素"><a href="#操作元素" class="header-anchor">#</a> <strong>操作元素</strong></h3> <p><strong>改变元素内容</strong></p> <ul><li>element.innerText: 起始位置到终止位置的内容, 但它去除 html 标签, 同时空格和换行也会去掉</li> <li>element.innerHTML: 起始位置到终止位置的内容, 包括 html 标签, 同时保留空格和换行</li></ul> <p><strong>样式属性操作</strong></p> <ul><li>element.style: 行内样式操作</li> <li>element.className: 类名样式操作</li></ul> <ol><li>样式采取驼峰式命名。修改 style 操作, 改变的是行内样式, CSS 权重比较高。</li> <li>class 是保留字, 使用 className 来操作元素类名属性, 使用 className 会直接更改元素的类名, 会覆盖原先的类名。</li></ol> <p><strong>属性值</strong></p> <ul><li>element.属性 获取/设置 属性值</li> <li>element.getAttribute('属性') =&gt; 获取属性值</li> <li>element.setAttribute('属性', '值') =&gt; 设置属性值： 主要针对自定义属性</li></ul> <p><strong>自定义属性</strong></p> <ul><li>目的： 保存并使用数据, 有些数据可以保存到页面中而不用保存到数据库中。</li> <li>自定义属性通过 getAttribute('属性')获取。</li> <li>H5 规定自定义属性 data- 开头作为属性名并赋值。</li> <li>H5 新增获取自定义属性的方法, 事件源.dataset.属性名(ie11+), dataset 是一个集合, 里面存放了所有以 data-开头的自定义属性。</li></ul> <p><strong>节点</strong></p> <ul><li>nodeType: 节点类型</li> <li>nodeName：节点名称</li> <li>nodeValue： 节点值</li></ul> <ol><li>元素节点 nodeType 为 1</li> <li>属性节点 nodeType 为 2</li> <li>文本节点 nodeType 为 3 (文本节点包含文字, 空格, 换行等)</li></ol> <ul><li><strong>父级节点： node.parentNode</strong></li></ul> <ol><li>parentNode 属性返回某节点的父节点, 最近的一个父节点。</li> <li>如果指定的节点没有父节点则返回 null。</li></ol> <ul><li><strong>子节点</strong></li></ul> <h4 id="parentnode-childnodes-标准"><a href="#parentnode-childnodes-标准" class="header-anchor">#</a> parentNode.childNodes（标准)</h4> <ol><li>子节点 childNodes 所有的子节点包含元素节点, 文本节点等。</li> <li>通过 nodeType 来判断获取元素节点。</li></ol> <h4 id="parentnode-children-非标准-实际开发常用"><a href="#parentnode-children-非标准-实际开发常用" class="header-anchor">#</a> parentNode.children （非标准）（实际开发常用）</h4> <ul><li>parentNode.children 是一个只读属性, 返回所有的子元素节点。</li></ul> <h4 id="parentnode-firstchild"><a href="#parentnode-firstchild" class="header-anchor">#</a> parentNode.firstChild</h4> <ul><li>firstChild 返回第一个子节点, 找不到则返回 null, 包含所有节点（元素节点, 文本节点等）。</li></ul> <h4 id="parentnode-lastchild"><a href="#parentnode-lastchild" class="header-anchor">#</a> parentNode.lastChild</h4> <ul><li>lastChild 返回最后一个子节点, 找不到则返回 null, 包含所有节点（元素节点, 文本节点等）。</li></ul> <h4 id="parentnode-firstelementchild-ie9"><a href="#parentnode-firstelementchild-ie9" class="header-anchor">#</a> parentNode.firstElementChild (ie9+)</h4> <ul><li>firstElementChild 返回第一个子元素节点, 找不到则返回 null。</li></ul> <h4 id="parentnode-lastelementchild-ie9"><a href="#parentnode-lastelementchild-ie9" class="header-anchor">#</a> parentNode.lastElementChild (ie9+)</h4> <ul><li>lastElementChild 返回最后一个子元素节点, 找不到则返回 null。</li></ul> <p><strong>实际开发写法：没兼容性问题, '事件源'.children[index]</strong></p> <p><strong>兄弟节点</strong></p> <ul><li>node.nextSibling: 返回当前元素的下一个兄弟节点, 找不到则返回 null, 包含所有的节点（元素节点, 文本节点等）。</li> <li>node.previousSibling: 返回当前元素的上一个兄弟节点, 找不到则返回 null, 包含所有的节点（元素节点, 文本节点等）。</li> <li>node.nextElementSibling: 返回当前元素的下一个兄弟元素节点, 找不到则返回 null。（ie9+）</li> <li>node.previousElementSibling: 返回当前元素的上一个兄弟元素节点, 找不到则返回 null。（ie9+）</li></ul> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getNextElementSibling</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> el <span class="token operator">=</span> element<span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>el <span class="token operator">=</span> el<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> el<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>添加节点</strong></p> <ul><li>document.createElement(): 创建节点元素节点</li> <li>node.appendChild(child): 将一个节点添加到指定父节点的子节点列表末尾。</li> <li>node.insertBefore(child, 指定元素): 将一个节点添加到父节点的指定子节点的前面。</li></ul> <p><strong>删除节点</strong></p> <ul><li>node.removeChild(child)</li></ul> <p><strong>阻止 a 链接跳转需要添加 javascript:void(0);或者 javascript:;</strong></p> <p><strong>复制节点(克隆节点)</strong></p> <ul><li>node.cloneNode()</li></ul> <ol><li>如果括号参数为空或者为 false,则是浅拷贝,即只克隆复制节点本身,不克隆里面的子节点。</li> <li>括号为 true, 深拷贝, 复制标签复制里面的内容。</li></ol> <h4 id="三种动态创建元素区别"><a href="#三种动态创建元素区别" class="header-anchor">#</a> <strong>三种动态创建元素区别</strong></h4> <ul><li>document.write(): 直接将内容写入页面的内容流, 但是文档流执行完毕, 则它会导致页面重绘。</li> <li>element.innerHTML</li> <li>document.createElement()： 创建多个元素, 效率稍低一点点, 但是结构更清晰。</li></ul> <ol><li>innerHTML 将内容写入某个 DOM 节点, 不会导致页面全部重绘。</li> <li>innerHTML 创建多个元素效率更高(不要拼接字符串, 采取数组形式拼接), 结构稍微复杂。</li></ol> <p><strong>不同浏览器下, innerHTML 效率要比 createElement 高</strong></p> <h3 id="事件-2"><a href="#事件-2" class="header-anchor">#</a> <strong>事件</strong></h3> <h4 id="注册事件-传统方式和方法监听注册"><a href="#注册事件-传统方式和方法监听注册" class="header-anchor">#</a> <strong>注册事件：传统方式和方法监听注册</strong></h4> <ol><li>传统方式： 利用 on 开头的事件 =&gt; 同一元素同一事件只能设置一个处理函数, 最后注册的处理函数会覆盖前面注册的处理函数。</li> <li>方法监听注册方式： addEventListener(),(IE9+), 之前的可使用 attachEvent()代替</li></ol> <ul><li>addEventListener 里面的事件类型是字符串, 必定加引号, 且不带 on</li> <li>addEventListener, 同一个元素, 同一个事件可以添加多个侦听器(事件处理程序)</li> <li>attachEvent(IE9 以前版本), 里面的事件类型是字符串, 必定加引号, 且带 on</li></ul> <p><strong>注册事件兼容性解决方案</strong></p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 判断当前是否支持addEventListener方法</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
    element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span> eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 相当于element.onclik = fn;</span>
    element<span class="token punctuation">[</span><span class="token string">'on'</span> <span class="token operator">+</span> eventName<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="删除事件-解绑事件"><a href="#删除事件-解绑事件" class="header-anchor">#</a> <strong>删除事件(解绑事件)</strong></h4> <ol><li>传统注册方式 =&gt; eventTarget.onclick = null;</li> <li>方法监听注册方式 =&gt; eventTarget.removeEventListener(type, listener[, useCapture])</li></ol> <p><strong>删除事件兼容性解决方案</strong></p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token comment">// fn函数需要单独声明</span>
<span class="token keyword">function</span> <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 判断当前是否支持removeEventListener方法</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
    element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
    element<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span> eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">[</span><span class="token string">'on'</span> <span class="token operator">+</span> eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="dom-事件"><a href="#dom-事件" class="header-anchor">#</a> <strong>DOM 事件</strong></h3> <ul><li><strong>事件流</strong></li></ul> <ol><li>捕获阶段</li> <li>当前目标阶段</li> <li>冒泡阶段</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>a. JS 代码中只能执行捕获或者冒泡其中一个阶段。
b. onclick和attachEvent(ie) 只能得到冒泡阶段。
c. 捕获阶段, 如果addEventListener第三个参数为true, 那么则处于捕获阶段。
d. 冒泡阶段, 如果addEventListener第三个参数为false 或者省略, 那么则处于冒泡阶段。

注： onblur, onfocus, onmouseenter, onmouseleave等事件是没有冒泡的。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Event<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token number">1.</span> event就是一个事件对象<span class="token punctuation">,</span> 写到侦听函数里，当形参使用
  <span class="token number">2.</span> 事件对象只有有了事件才会存在<span class="token punctuation">,</span> 他是系统给我们自动创建的<span class="token punctuation">,</span> 不需要我们传递参数
  <span class="token number">3.</span> 事件对象是我们事件一系列相关数据的集合<span class="token punctuation">,</span> 跟事件相关。
  <span class="token number">4.</span> 事件对象是形参， 可以自己命名。如： e<span class="token punctuation">,</span> evt等
  <span class="token number">5.</span> 事件对象兼容性问题<span class="token punctuation">,</span> ie678 通过window<span class="token punctuation">.</span>event兼容性写法 e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><table><thead><tr><th>鼠标对象属性方法</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td>e.target</td> <td style="text-align:center;">返回触发事件的对象（标准）</td></tr> <tr><td>e.srcElement</td> <td style="text-align:center;">返回触发事件的对象（非标准）</td></tr> <tr><td>e.type</td> <td style="text-align:center;">返回事件的类型, 如 click, mouseover 不带 on</td></tr> <tr><td>e.cancelBubble</td> <td style="text-align:center;">该属性阻止冒泡, 非标准 ie6-8 使用</td></tr> <tr><td>e.returnValue</td> <td style="text-align:center;">该属性阻止默认事件（默认行为）非标准 ie6-8 使用, 比如不让链接跳转</td></tr> <tr><td>e.preventDefault()</td> <td style="text-align:center;">该方法阻止默认事件（默认行为）标准, 比如不让链接跳转</td></tr> <tr><td>e.stopPropagation()</td> <td style="text-align:center;">阻止冒泡 标准</td></tr></tbody></table> <ul><li>e.target 返回的是触发事件的对象（元素）, this 返回的是绑定事件的对象（元素）</li> <li>区别： e.target 点击了那个元素就返回哪个元素, this 哪个元素绑定了这个点击事件就返回谁。</li></ul> <p><strong>阻止事件冒泡的兼容性解决方案</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>常用的鼠标事件</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>禁止鼠标右键菜单
contextmenu主要控制应该何时显示上下文菜单（用于取消默认的上下文菜单）
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

禁止鼠标选中（selectstart 开始选中）
禁止选中文字
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'selectstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>鼠标事件对象 MouseEvent 和 键盘事件对象 KeyboardEvent</strong></p> <table><thead><tr><th>鼠标事件对象</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td>e.clientX</td> <td style="text-align:center;">返回鼠标相对于浏览区可视区域的 X 坐标</td></tr> <tr><td>e.clientY</td> <td style="text-align:center;">返回鼠标相对于浏览区可视区域的 Y 坐标</td></tr> <tr><td>e.pageX</td> <td style="text-align:center;">返回鼠标相对于文档页面的 X 坐标 （IE9+）</td></tr> <tr><td>e.pageY</td> <td style="text-align:center;">返回鼠标相对于文档页面的 Y 坐标 （IE9+）</td></tr> <tr><td>e.screenX</td> <td style="text-align:center;">返回鼠标相对于电脑屏幕的 X 坐标</td></tr> <tr><td>e.screenY</td> <td style="text-align:center;">返回鼠标相对于电脑屏幕的 Y 坐标</td></tr></tbody></table> <table><thead><tr><th>键盘事件</th> <th style="text-align:center;">触发条件</th></tr></thead> <tbody><tr><td>onkeyup</td> <td style="text-align:center;">某个键盘按键被松开时触发</td></tr> <tr><td>onkeydown</td> <td style="text-align:center;">某个键盘按键被按下时触发</td></tr> <tr><td>onkeypress</td> <td style="text-align:center;">某个键盘按键被按下时触发（不识别功能键, ctrl, shift, 箭头等）</td></tr></tbody></table> <ul><li><p>执行顺序： keydown -&gt; keypress -&gt; keyup</p></li> <li><p>键盘事件对象中的 keyCode 属性可以得到相应的 ASCII 码值。</p></li> <li><p>keydown 与 keyup 不区分字母大小写, keypress 区分</p></li> <li><p>注： keydown 与 keypress 在文本框里面的特点： 他们两个事件触发的时候, 文字还没落入文本框, keyup 事件触发的时候, 文字已经落入文本框里面</p></li></ul> <h3 id="bom"><a href="#bom" class="header-anchor">#</a> <strong>BOM</strong></h3> <ul><li>浏览器对象模型, 提供了独立于内容而与浏览器窗口进行交互的对象, 其核心对象是 window</li> <li>BOM 比 DOM 更大, 它包含 DOM。</li></ul> <p><strong>window</strong></p> <ol><li>document</li> <li>location</li> <li>navigation</li> <li>screen</li> <li>history</li></ol> <p><strong>window 对象是浏览器的顶级对象</strong></p> <ol><li>它是 JS 访问浏览器窗口的一个接口。</li> <li>它是一个全局对象。定义在全局作用域中的变量, 函数都会变成 window 对象的属性和方法。</li></ol> <ul><li>window 调用时可以省略, window 下一个特殊属性 window.name</li></ul> <h4 id="window-对象常见事件"><a href="#window-对象常见事件" class="header-anchor">#</a> <strong>window 对象常见事件</strong></h4> <p><strong>窗口加载事件</strong></p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
或者
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">onload是窗口</span><span class="token punctuation">(</span>页面<span class="token punctuation">)</span>加载事件<span class="token punctuation">,</span> <span class="token function">当文档内容完全加载完成会触发该事件</span><span class="token punctuation">(</span>包括图像<span class="token punctuation">,</span>脚本文件<span class="token punctuation">,</span><span class="token constant">CSS</span>文件等<span class="token punctuation">)</span><span class="token punctuation">,</span> 就调用的处理函数。
window<span class="token punctuation">.</span>onload传统注册事件方式只能写一次<span class="token punctuation">,</span> 如果有多个<span class="token punctuation">,</span> 会以最后一个window<span class="token punctuation">.</span>onload为准。
如果使用 addEventListener 则没有限制。

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
DOMContentLoaded事件触发时<span class="token punctuation">,</span> 仅当<span class="token constant">DOM</span>加载完成<span class="token punctuation">,</span> 不包括样式表<span class="token punctuation">,</span> 图片<span class="token punctuation">,</span> <span class="token function">flash等等。</span><span class="token punctuation">(</span>ie9<span class="token operator">+</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>窗口大小事件</strong></p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span>onresize 是调整窗口加载事件。
利用这个事件完成响应式布局。window<span class="token punctuation">.</span>innerWidth<span class="token operator">:</span> 当前屏幕宽度。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="js-执行机制"><a href="#js-执行机制" class="header-anchor">#</a> <strong>JS 执行机制</strong></h4> <p><strong>同步任务</strong></p> <ul><li>同步任务都在主线程上执行, 形成一个执行栈。</li></ul> <p><strong>异步任务</strong></p> <ul><li>JS 的异步是通过回调函数实现的。
一般而言, 异步任务有一下三种类型</li></ul> <ol><li>普通事件, click, resize 等。</li> <li>资源加载, load, error 等。</li> <li>定时器, setTimeout, setInterval 等。</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>a. 先执行执行栈中的同步任务。
b. 异步任务（回调函数）放入任务队列中。
c. 一旦执行栈中的所有同步任务执行完毕, 系统就会按次序读取任务队列中的异步任务, 于是被读取的异步任务结束等待状态, 进入执行栈, 开始执行。

由于主线程不断的获得任务, 执行任务, 再获取任务, 再执行, 所以这种机制被称为事件循环。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="location-对象"><a href="#location-对象" class="header-anchor">#</a> <strong>location 对象</strong></h4> <ul><li>window 对象给我们提供了一个 location 属性用于获取或设置窗体的 URL, 并且可以用于解析 URL。这个属性返回的是一个对象, 所以将这个属性也称为 location 对象。</li></ul> <p><strong>URL</strong></p> <ul><li>统一资源定位符： 一般语法格式: protocol://host[:port]/path/[?query]#fragment
<table><thead><tr><th>组成</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td>protocol</td> <td style="text-align:center;">通信协议 常用的 http,ftp,maito 等</td></tr> <tr><td>host</td> <td style="text-align:center;">主机(域名)</td></tr> <tr><td>port</td> <td style="text-align:center;">端口号（可选）, 使用时使用方案默认端口, 如 http 默认端口 80</td></tr> <tr><td>path</td> <td style="text-align:center;">路径 由零或多个 '/' 符号隔开的字符串, 一般用来表示主机上的一个目录或文件地址</td></tr> <tr><td>query</td> <td style="text-align:center;">参数 以键值对的形式通过 &amp; 符号分隔开来</td></tr> <tr><td>fragment</td> <td style="text-align:center;">片段 #后面内容 常见于链接 锚点</td></tr></tbody></table></li></ul> <table><thead><tr><th>location 对象属性</th> <th style="text-align:center;">返回值</th></tr></thead> <tbody><tr><td>location.href</td> <td style="text-align:center;">获取或设置整个 URL</td></tr> <tr><td>location.host</td> <td style="text-align:center;">主机(域名)</td></tr> <tr><td>location.port</td> <td style="text-align:center;">返回端口号, 如果未写返回空字符串</td></tr> <tr><td>location.pathName</td> <td style="text-align:center;">返回路径</td></tr> <tr><td>location.search</td> <td style="text-align:center;">返回参数</td></tr> <tr><td>location.hash</td> <td style="text-align:center;">返回片段 #后面内容 常见于链接 锚点</td></tr></tbody></table> <table><thead><tr><th>location 对象方法</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td>location.assign()</td> <td style="text-align:center;">跟 href 一样, 可以跳转页面(也称为重定向页面) , 可以实现后退</td></tr> <tr><td>location.replace()</td> <td style="text-align:center;">替换当前页面, 因为不记录历史, 所以不能后退页面</td></tr> <tr><td>location.reload()</td> <td style="text-align:center;">重新加载页面, 相当于刷新按钮或者 f5 如果参数为 true 强制刷新 ctrl+f5</td></tr></tbody></table> <p><strong>navigator 对象</strong></p> <ul><li>包含有关浏览器的信息, 常用 userAgent, 该属性可以返回由客户发送服务器的 user-agent 头部的值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>
  navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|WOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">''</span> <span class="token comment">// 手机</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">''</span> <span class="token comment">// 电脑</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>history 对象</strong></p> <ul><li><p>window 对象提供一个 history 对象, 与浏览器历史记录进行交互。该对象包含用户（在浏览器窗口中）访问过的 URL。</p> <table><thead><tr><th>history 对象方法</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td>back()</td> <td style="text-align:center;">可以后退功能</td></tr> <tr><td>forward()</td> <td style="text-align:center;">前进功能</td></tr> <tr><td>go(参数)</td> <td style="text-align:center;">前进后退功能, 参数为 1 前进 1 个页面, 参数为-1 后退一个页面</td></tr></tbody></table></li></ul> <h3 id="元素偏移量-offset"><a href="#元素偏移量-offset" class="header-anchor">#</a> <strong>元素偏移量 offset</strong></h3> <ul><li>使用 offset 系列相关属性可以动态的得到元素的位置（偏移）, 大小等。</li></ul> <ol><li>获得元素距离带有定位父元素的位置。</li> <li>获得元素自身的大小（宽高）。</li> <li>注：返回的数值都不带单位。</li></ol> <table><thead><tr><th>offset 系列属性</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td>element.offsetParent</td> <td style="text-align:center;">返回该元素带有定位的父级元素 如果父级都没有定位则返回 body</td></tr> <tr><td>element.offsetTop</td> <td style="text-align:center;">返回元素相对带有定位父元素上方的偏移</td></tr> <tr><td>element.offsetLeft</td> <td style="text-align:center;">返回元素相对带有定位父元素左边框的偏移</td></tr> <tr><td>element.offsetWidth</td> <td style="text-align:center;">返回自身包括 padding, 边框, 内容区的宽度, 返回数值不带单位</td></tr> <tr><td>element.offsetHeight</td> <td style="text-align:center;">返回自身包括 padding, 边框, 内容区的高度, 返回数值不带单位</td></tr></tbody></table> <ul><li>offset</li></ul> <ol><li>offset 可以得到任意样式表中的样式表</li> <li>offset 系列获得的数值是没有单位的</li> <li>offsetWidth 包含 padding+border+width</li> <li>offsetWidth 等属性是只读属性, 只能获取不能复制</li> <li>获取元素大小位置, 用 offset 更合适</li></ol> <ul><li>style</li></ul> <ol><li>style 只能得到行内样式表中的样式值。</li> <li>style.width 获得的是带有单位的字符串。</li> <li>style.width 获得不包含 padding 和 border 的值。</li> <li>style.width 是可读写属性, 可以获取也可以赋值。</li> <li>想要给元素更改值, 则需要用 style 改变。</li></ol> <h3 id="元素可视区-client"><a href="#元素可视区-client" class="header-anchor">#</a> <strong>元素可视区 client</strong></h3> <ul><li>使用 client 系列相关属性来获取元素可视区域相关信息, 通过 client 系列相关属性可以动态得到该元素边框大小, 元素大小等。</li></ul> <table><thead><tr><th>client 系列属性</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td>element.clientTop</td> <td style="text-align:center;">返回元素上边框大小</td></tr> <tr><td>element.clientLeft</td> <td style="text-align:center;">返回元素左边框大小</td></tr> <tr><td>element.clientWidth</td> <td style="text-align:center;">返回自身包括 padding, 内容区域的宽度, 不含边框, 返回数值不带单位</td></tr> <tr><td>element.clientHeight</td> <td style="text-align:center;">返回自身包括 padding, 内容区域的高度, 不含边框, 返回数值不带单位</td></tr></tbody></table> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token comment">// flexible</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">flexible</span><span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span>document</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 获取的html的根元素</span>
  <span class="token keyword">var</span> docEl <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
  <span class="token comment">// 获取物理像素比</span>
  <span class="token keyword">var</span> dpr <span class="token operator">=</span> document<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token comment">// 设置body字体大小</span>
  <span class="token keyword">function</span> <span class="token function">setBodyFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">12</span> <span class="token operator">*</span> dpr<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果页面没有body元素, 则等着我们页面主要DOM元素加载完毕再去设置body字体大小</span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> setBodyFontSize<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">setBodyFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  设置html文字大小</span>
  <span class="token keyword">function</span> <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> rem <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
    docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 页面大小发生变化, 重新设置rem的大小</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> setRemUnit<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 重新加载页面触发的事件</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// pageshow会在load事件触发后触发, 根据事件对象中的persisted来判断是否是缓存中的页面触发的pageshow事件</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// e.persisted为true, 就是说这个页面如果是缓存取过来的页面, 也需要重新计算一下rem的大小</span>
      <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 有些移动端的浏览器不支持0.5像素的写法</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>dpr <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> fakeBody <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> testElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    testElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'.5px solid transparent'</span><span class="token punctuation">;</span>
    fakeBody<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>testElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    docEl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fakeBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>testElement<span class="token punctuation">.</span>offsetHeight <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      docEl<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hairlines'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    docEl<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>fakeBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="元素-scroll-系列属性"><a href="#元素-scroll-系列属性" class="header-anchor">#</a> <strong>元素 scroll 系列属性</strong></h3> <ul><li>scroll 相关属性可以动态的得到元素的大小, 滚动距离等。
<table><thead><tr><th>scroll 系列属性</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td>element.scrollTop</td> <td style="text-align:center;">返回被卷去的上侧距离, 数值不带单位</td></tr> <tr><td>element.scrollLeft</td> <td style="text-align:center;">返回被卷去的左侧距离, 数值不带单位</td></tr> <tr><td>element.scrollWidth</td> <td style="text-align:center;">返回自身实际宽度, 不含边框, 返回数值不带单位</td></tr> <tr><td>element.scrollHeight</td> <td style="text-align:center;">返回自身实际高度, 不含边框, 返回数值不带单位</td></tr></tbody></table></li></ul> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 页面被卷去的头部兼容性解决</span>
<span class="token number">1.</span> 声明了<span class="token constant">DTD</span><span class="token punctuation">,</span> 使用document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
<span class="token number">2.</span> 未声明<span class="token constant">DTD</span><span class="token punctuation">,</span> 使用document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
<span class="token number">3.</span> 可以通过 window<span class="token punctuation">.</span>pageYOffset 获得<span class="token punctuation">,</span> 左侧 window<span class="token punctuation">.</span><span class="token function">pageXOffset</span> <span class="token punctuation">(</span>ie9<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">left</span><span class="token operator">:</span> window<span class="token punctuation">.</span>pageXOffset <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">top</span><span class="token operator">:</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li>offset 系列经常用于获得元素位置 offsetLeft, offsetTop。</li> <li>client 经常用于获取元素大小 clientWidth, clientHeight。</li> <li>scroll 经常用于获取滚轮距离 scrollTop, scrollLeft。</li> <li>页面滚动距离通过 window.pageXOffset 获得。</li></ol> <p><strong>mouseenter 鼠标事件</strong></p> <ul><li>当鼠标移动到元素上时就会触发 mouseenter 事件。</li> <li>类似 mouseover, 两者之间差别是：mouseover 鼠标经过自身盒子会触发, mouseenter 只会经过自身盒子触发。（因为 mouseenter 不会冒泡）</li> <li>跟 mouseenter 搭配, 鼠标离开 mouseleave 同样不会冒泡。</li></ul> <h3 id="动画"><a href="#动画" class="header-anchor">#</a> <strong>动画</strong></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>利用定时器实现滚动

<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
  obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span>
    step <span class="token operator">=</span> step <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
      callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">'px'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>轮播无缝滚动</strong></p> <ul><li>声明一个变量 num, 点击一次自增 1, 此变量乘以图片宽度, 就是滚动距离。</li> <li>第一份图片克隆（cloneNode(), true(深克隆), false(浅克隆)）一份放到最后面（放到最后面的 appendChild）。</li> <li>当图片滚动到克隆的最后一张时, 让容器快速的, 不做动画的跳到最左侧： left 为 0。</li> <li>当 num 赋值为 0 时, 可以重新开始滚动图片。</li></ul> <p><strong>节流阀</strong></p> <ul><li>防止轮播图按钮连续点击造成播放过快。</li> <li>目的： 当上一个函数动画内容执行完毕, 再去执行下一个函数动画, 让事件无法连续触发。</li> <li>核心思路： 利用回调函数, 添加一个变量来控制, 锁住函数和解锁函数。</li></ul> <ol><li>设置一个变量 var flag = true;</li> <li>if(flag){flag = false; ....}; 关闭水龙头</li> <li>利用回调函数, 动画执行完毕, flag = true; 打开水龙头</li></ol> <p><strong>返回顶部</strong></p> <ol><li>利用上面滚动函数, 将所有 left 相关的值改为跟页面垂直滚动距离相关就可以了。</li> <li>页面滚动多少, 可以通过 window.pageYOffset 得到。</li> <li>页面滚动使用, window.scroll(x,y)。</li></ol> <h3 id="移动端"><a href="#移动端" class="header-anchor">#</a> <strong>移动端</strong></h3> <ul><li><p>触屏事件</p> <table><thead><tr><th>触屏 touch 事件</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td>touchstart</td> <td style="text-align:center;">手指触摸到一个 DOM 元素时触发</td></tr> <tr><td>touchmove</td> <td style="text-align:center;">手指在一个 DOM 元素上滑动时触发</td></tr> <tr><td>touchend</td> <td style="text-align:center;">手指从一个 DOM 元素上移开时触发</td></tr></tbody></table></li> <li><p>触摸事件对象（TouchEvent）</p> <table><thead><tr><th>触屏列表</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td>touches</td> <td style="text-align:center;">正在触摸屏幕的所有手指的一个列表</td></tr> <tr><td>targetTouches</td> <td style="text-align:center;">正在触摸当前 DOM 元素的手指的一个列表 (常用)</td></tr> <tr><td>changedTouches</td> <td style="text-align:center;">手指状态发生了改变的列表, 从无到有, 从有到无变化</td></tr></tbody></table></li> <li><p>移动端拖动元素</p> <ol><li>拖动元素需要当前手指坐标值, 可以使用 targetTouches[0]里面的 pageX 和 pageY。</li> <li>移动端拖动原理, 手指移动过程中计算出手指移动的距离, 然后用盒子原来的位置 + 手指移动的距离。</li> <li>手指移动的距离: 手指滑动中的位置减去手指刚开始触摸的位置。</li></ol></li> <li><p>触摸元素 touchstart: 获取手指初始坐标, 同时获得盒子原来的位置。</p></li> <li><p>移动手指 touchmove: 计算手指的滑动距离, 并且移动盒子。</p></li> <li><p>离开手指 touchend:</p></li></ul> <p>注： 手指移动也会触发滚动屏幕, 所以这里要阻止默认的屏幕滚动 e.preventDefault();</p> <ul><li>移动端切换 class</li></ul> <ol><li>xx.classList.add()</li> <li>xx.classList.remove()</li> <li>xx.classList.toggle()</li></ol> <ul><li>移动端点击事件 300ms 延时问题, 原因是移动端屏幕双击会缩放页面。
解决方案：</li></ul> <ol><li>禁用缩放, 浏览器禁用默认的双击缩放行为并且去掉 300ms 的点击延迟。</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-scalable=no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>利用 touch 事件封装解决 300ms 延迟。</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>原理：
1. 当手指触摸屏幕, 记录当前触摸时间。
2. 当手指离开屏幕, 用离开的时间减去触摸的时间。
3. 如果时间小于150ms, 并且没有滑动过屏幕, 那么就定义为点击。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> isMove <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 记录触摸时候的时间变量</span>

  obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;touchstart&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 记录触摸时间</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;touchmove&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isMove <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 看看是否有滑动, 有滑动算拖拽, 不算点击</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;touchend&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>isMove <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果手指触摸和离开时间小于150ms算点击</span>
      callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行回调</span>
    <span class="token punctuation">}</span>
    isMove <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 重置</span>
    startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ol start="3"><li>使用插件, fastclick 插件解决 300ms 延迟</li></ol> <h3 id="动态事件"><a href="#动态事件" class="header-anchor">#</a> <strong>动态事件</strong></h3> <p><strong>动态脚本</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">loadScriptString</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    script<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
    script<span class="token punctuation">.</span>text <span class="token operator">=</span> code<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

调用：
<span class="token function">loadScriptString</span><span class="token punctuation">(</span><span class="token string">&quot;function alertJs(){alert('JS')}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>动态样式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loadStyles</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span>
  link<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">'stylesheet'</span>
  link<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/css'</span>
  link<span class="token punctuation">.</span>href <span class="token operator">=</span> url
  <span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">loadStyleString</span><span class="token punctuation">(</span><span class="token parameter">css</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span>
  style<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/css'</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    style<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    style<span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText <span class="token operator">=</span> css
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">loadStyleString</span><span class="token punctuation">(</span><span class="token string">'body{background-color:red}'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/31/2022, 6:22:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/front/js/ES6.html" class="prev">
          ES6
        </a></span> <span class="next"><a href="/front/js/shengtou.html">
          渗透技术
        </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-ac050c62></ul></main></div> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.0a4da864.js" defer></script><script src="/assets/js/4.6a199617.js" defer></script><script src="/assets/js/1.65eefa6a.js" defer></script><script src="/assets/js/24.c872c11f.js" defer></script>
  </body>
</html>
